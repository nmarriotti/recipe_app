<%= render 'users/searchform' %>
<% if @users.count > 0 %>
    <h1>Results</h1>
    
    <% @users.each do |user| %>
        <% if user.id != current_user.id %>
        <div class="card">
            <div class="card-body">
                <div class="float-left">
                    <h6><%= user.email %></h6>
                </div>
                <div class="float-right">
                    <% if @friends.count > 0 %>
                        <% @friends.each do |friend| %>
                            <% if friend.friend_id == user.id %>
                                <%= link_to 'Unfollow', friend, method: :delete, class:"btn btn-danger btn-sm" %>
                            <% else %>
                                <%= link_to "Follow", friends_path(:user_id => current_user.id, :friend_id => user.id), :method => :post, class:"btn btn-light btn-sm" %>
                            <% end %>
                        <% end %>
                    <% else %>
                        <%= link_to "Follow", friends_path(:user_id => current_user.id, :friend_id => user.id), :method => :post, class:"btn btn-light btn-sm" %>
                    <% end %>
                </div>
            </div>
        </div>
        <% end %>
    <% end %>
<% else %>
    <p>No results found.</p>
<% end %>